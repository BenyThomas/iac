apiVersion: v1
kind: Secret
metadata:
  name: vsphere-cloud-config
  namespace: kube-system
  labels:
    app.kubernetes.io/name: vsphere-cpi
    app.kubernetes.io/component: cloud-config
stringData:
  vsphere.conf: |
    [Global]
    # Least-privileged service account scoped to only the required vCenter objects.
    user = "svc-vsphere-cpi@vsphere.local"
    password = "CHANGE_ME"
    server = "vcenter.example.local"
    port = "443"
    insecure-flag = "false"
    secret-name = "vsphere-cloud-config"
    secret-namespace = "kube-system"
    datacenters = "DC1"
    # Unique cluster ID ensures providerID stability and avoids cross-cluster collisions.
    cluster-id = "rke2-prod"

    [VirtualCenter "vcenter.example.local"]
    datacenters = "DC1"
    user = "svc-vsphere-cpi@vsphere.local"
    password = "CHANGE_ME"
    port = "443"
    insecure-flag = "false"
    thumbprint = "REPLACE_WITH_VCENTER_TLS_THUMBPRINT"
